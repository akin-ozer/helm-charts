suite: super agent's config values are honored
templates:
  - templates/configmap-superagent-config.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: super agent's config can be disabled
    set:
      global:
        licenseKey: test
      config:
        create: false
    asserts:
      - hasDocuments:
          count: 0
  - it: super agent's config templates
    set:
      global:
        licenseKey: test
      config:
        content:
          test: value
          test2: value2
    asserts:
      - equal:
          path: data["config.yaml"]
          value: |
            opamp:
              endpoint: https://opamp.service.newrelic.com/v1/opamp
              headers:
                api-key: test
            test: value
            test2: value2
